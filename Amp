if not game:IsLoaded() then game.Loaded:Wait() end

local MT = getrawmetatable(game)
local OldIndex = MT. __index
local OldNamecall = MT.__namecall
setreadonly(MT, false)
MT.__index = newcclosure(function(P, M, TH, TI)
	if not checkcaller() and getnamecallmethod() then
		if tostring(P) == "Position" and tostring(M) == "Magnitude" then return end
		if tostring(TH) == "Handle" then return end if tostring(TI) == "firetouchinterest" then return end
	end
	return OldIndex(P, M, TH, TI)
end)
for _, v in next, getconnections(game:GetService("LogService").MessageOut) do v:Disable() end
for _, v in next, getconnections(game:GetService("ScriptContext").Error) do v:Disable() end
game:GetService("ScriptContext"):SetTimeout(0.1)
setreadonly(MT, true) 



getgenv().Settings = {
	amp = {
		Toggled = true,
		multiplyer = 4, 
		hitall = false
	}
}

local RunService = game:GetService("RunService")
local PlayerService = game:GetService("Players")
local Fetch_Players = PlayerService:GetPlayers()

local Player = PlayerService.LocalPlayer
local Character = Player.Character
local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")

local tool = Character and Character:FindFirstChildOfClass("Tool")
local Handle = tool and tool:FindFirstChild("Handle")
local HandleTouchingParts = Handle:GetTouchingParts() 
getgenv().touch = firetouchinterest()


RunService.Stepped:Connect(function()
	if not Settings.amp.Toggle then return end
	
	for _, others in pairs(Fetch_Players) do
		if others.Name ~= Player.Name then
			
			local othersChar = others.Character
			local othersHumanoid = othersChar and othersChar:FindFirstChildOfClass("Humanoid")
			
			if not tool or not Handle then return end
			if Humanoid and othersHumanoid then if Humanoid.Health <= 0 or othersHumanoid.Health <= 0 then return end end
			
			for _, hit in pairs(HandleTouchingParts) do
				if hit:IsA("BasePart") then

					local TargetChar = hit.Parent
					if TargetChar == Character then return end 
					local TargetChildren = TargetChar:GetChildren()
					tool:Activate()

					if Settings.amp.hitall then 
						for _, Child in pairs(TargetChildren) do
							if Child:IsA("BasePart") then
								for _ = 1, Settings.amp.multiplyer do
									touch(Child, Handle, 0)
									touch(Child, Handle, 1)
								end
							end
						end
					else
						for _ = 1, Settings.amp.multiplyer do
							touch(hit, Handle, 0)
							touch(hit, Handle, 1)
						end
					end
				end
			end
		end
	end
end)
