if not game:IsLoaded() then
	game.Loaded:Wait()
end

if game.PlaceId == 6361937392 or game.PlaceId == 6356763358 or game.PlaceId == 11515893037 or game.PlaceId == 13594360346 then

	local ReplicatedFirst = game:GetService("ReplicatedFirst")
	local sm = ReplicatedFirst:FindFirstChild("Static"):FindFirstChild("Superman")
	local Stats1 = ReplicatedFirst:FindFirstChild("Prod"):FindFirstChild("Stats")
	local SH = ReplicatedFirst:FindFirstChild("Static"):FindFirstChild("UIScaleHandler")

	if sm and Stats1 and SH then
		sm.Parent = nil
		Stats1.Parent = nil
		SH.Parent = nil
	end
end

getgenv().Settings = {

	AmpToggle = true , 
	Damage = 2 ,
	
	LungeBotToggled = true ,
	LungeBotRange = 9  ,
	
	guiToggle = true , 
	
	HitboxToggle = true , 
	HitboxSize = 3.5 , 
	HitboxVisual = false ,
	HitboxColor = Color3.fromRGB(0, 0, 0)
}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local function Whitelist()

	local wl = {}

	for _, p in pairs(Players:GetPlayers()) do
		if p.Name ~= player.Name then

			local qchar = p.Character

			if qchar then
				for _, child in pairs(qchar:GetChildren()) do
					if child:IsA("BasePart") then
						wl[child] = true
					end
				end
			end
		end
	end
	return wl
end

RunService.Stepped:Connect(function()
	if not Settings.AmpToggle then return end
	
	for _, p in pairs(Players:GetPlayers()) do
		if p.Name ~= player.Name then

			local qChar = p.Character
			local qHM = qChar and qChar:FindFirstChildOfClass("Humanoid")

			local Char = player.Character
			local HM = Char and Char:FindFirstChildOfClass("Humanoid")

			if HM and qHM then
				if HM.Health > 0 and qHM.Health > 0 then

					local tool = Char and Char:FindFirstChildOfClass("Tool")
					local Handle = tool and tool:FindFirstChild("Handle")

					local wll = Whitelist()
					if not tool and Handle then return end

					pcall(function()
						for _, hit in pairs(Handle:GetTouchingParts()) do
							if wll[hit] then
								for _, Child in pairs(qChar:GetChildren()) do
									for _ = 1, Settings.Damage do
										if Child:IsA("BasePart") then
											firetouchinterest(Child, Handle, 0)
											firetouchinterest(Child, Handle, 1)
											firetouchinterest(Child, Handle, 0)
										end
									end
								end
							end
						end
					end)
				end
			end
		end
	end
end)

RunService.Stepped:Connect(function()
	if Settings.HitboxToggle then
		for _, p in pairs(Players:GetPlayers()) do
			if p.Name ~= player.Name then
				pcall(function()

					local qChar = p.Character
					local qHRP = qChar and qChar:FindFirstChild("HumanoidRootPart")

					qHRP.Size = Vector3.new(Settings.HitboxSize, Settings.HitboxSize, Settings.HitboxSize)

					qHRP.CanCollide = false

				end)
			end
		end
	else
		for _, p in pairs(Players:GetPlayers()) do
			if p.Name ~= player.Name then
				pcall(function()

					local qChar = p.Character
					local qHRP = qChar and qChar:FindFirstChild("HumanoidRootPart")

					qHRP.Size = Vector3.new(2, 2, 1)

					qHRP.CanCollide = false

				end)
			end
		end
	end
end)

RunService.Stepped:Connect(function()
	if Settings.HitboxVisual then
		for _, p in pairs(Players:GetPlayers()) do
			if p.Name ~= player.Name then
				pcall(function()
					local qChar = p.Character
					local qHRP = qChar and qChar:FindFirstChild("HumanoidRootPart")

					qHRP.Transparency = 0.7
				end)
			end
		end

	else

		for _, p in pairs(Players:GetPlayers()) do
			if p.Name ~= player.Name then
				pcall(function()
					local qChar = p.Character
					local qHRP = qChar and qChar:FindFirstChild("HumanoidRootPart")

					qHRP.Transparency = 1
				end)
			end
		end
	end

end)

RunService.RenderStepped:Connect(function()
	for _, p in pairs(Players:GetPlayers()) do
		if p.Name ~= player.Name then
			pcall(function()
				local qChar = p.Character
				local qHRP = qChar and qChar:FindFirstChild("HumanoidRootPart")

				qHRP.Color = Settings.HitboxColor
			end)
		end
	end
end)

RunService.Stepped:Connect(function()
	if Settings.LungeBotToggled then
		for _, p in pairs(Players:GetPlayers()) do
			if p.Name ~= player.Name then

				local pChar = p.Character
				local pHRP = pChar and pChar:FindFirstChild("HumanoidRootPart")
				local pHM = pChar and pChar:FindFirstChildOfClass("Humanoid")

				local Char = player.Character
				local HRP = Char and Char:FindFirstChild("HumanoidRootPart")
				local HM = Char and Char:FindFirstChildOfClass("Humanoid")

				if HM and pHM then
					if HM.Health > 0 and pHM.Health > 0 then

						local tool = Char and Char:FindFirstChildOfClass("Tool")
						local Handle = tool and tool:FindFirstChild("Handle")

						pcall(function()
							if tool and Handle then
								local Distance = (Handle.Position - pHRP.Position).Magnitude
								if Distance <= Settings.LungeBotRange then
									tool:Activate()
								end
							end
						end)
					end
				end
			end
		end
	end
end)

RunService.RenderStepped:Connect(function()
	if game.PlaceId == 6361937392 or game.PlaceId == 6356763358 or game.PlaceId == 11515893037 or game.PlaceId == 13594360346 then
		_G.playerGui = player:FindFirstChild("PlayerGui")
		_G.UIF = _G.playerGui:FindFirstChild("UserInterface")
		_G.Menus = _G.UIF:FindFirstChild("Menus")

		if Settings.guiToggle then
			if _G.Menus:FindFirstChild("Store") then
				if _G.Menus:FindFirstChild("Store").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Store").Visible = false
				else
					_G.Menus:FindFirstChild("Store").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Quests") then
				if _G.Menus:FindFirstChild("Quests").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Quests").Visible = false
				else
					_G.Menus:FindFirstChild("Quests").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Inventory") then
				if _G.Menus:FindFirstChild("Inventory").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Inventory").Visible = false
				else
					_G.Menus:FindFirstChild("Inventory").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Index") then
				if _G.Menus:FindFirstChild("Index").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Index").Visible = false
				else
					_G.Menus:FindFirstChild("Index").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("BulkRewards") then
				if _G.Menus:FindFirstChild("BulkRewards").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("BulkRewards").Visible = false
				else
					_G.Menus:FindFirstChild("BulkRewards").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Marketplace") then
				if _G.Menus:FindFirstChild("Marketplace").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Marketplace").Visible = false
				else
					_G.Menus:FindFirstChild("Marketplace").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Arcade") then
				if _G.Menus:FindFirstChild("Arcade").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Arcade").Visible = false
				else
					_G.Menus:FindFirstChild("Arcade").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("Clans") then
				if _G.Menus:FindFirstChild("Clans").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("Clans").Visible = false
				else
					_G.Menus:FindFirstChild("Clans").Visible = true
				end
			end

			if _G.Menus:FindFirstChild("UpdateLog") then
				if _G.Menus:FindFirstChild("UpdateLog").Position == UDim2.new(0.5, 0, 1.5, 0) then
					_G.Menus:FindFirstChild("UpdateLog").Visible = false
				else
					_G.Menus:FindFirstChild("UpdateLog").Visible = true
				end
			end
		end
	end
end)
